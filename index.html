<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chicago Trip Planner â€“ Full Edit Mode</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  :root{--primary:#00695c;--accent:#ffd54f;--bg:#f8f9fa;--text:#212121;--card:#ffffff}
  *{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI",Roboto,Helvetica,Arial,sans-serif}
  body{background:var(--bg);color:var(--text);line-height:1.6}
  header{background:linear-gradient(135deg,var(--primary),#004d40);color:#fff;text-align:center;padding:1em}
  header h1{font-size:1.8em}
  .container{max-width:900px;margin:auto;padding:1em}
  .day{background:var(--card);margin:1em 0;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1);padding:1em}
  .day-header{background:var(--primary);color:#fff;padding:.5em .8em;border-radius:8px 8px 0 0;margin:-1em -1em 1em -1em;cursor:grab;font-weight:600}
  textarea,input[type=text],input[type=time]{width:100%;margin:.2em 0;padding:.4em;border:1px solid #ccc;border-radius:4px;font-size:.9em}
  textarea{resize:vertical;min-height:60px}
  button{background:var(--primary);color:#fff;border:none;padding:.4em .8em;border-radius:4px;margin:.2em;font-size:.8em;cursor:pointer}
  .actions{display:flex;gap:.5em;flex-wrap:wrap;margin:.5em 0}
  #importExport{margin-top:1em}
  .dragging{opacity:.4}
</style>
</head>
<body>

<header>
  <h1>Chicago 4-Day Planner â€“ FULL EDIT MODE</h1>
</header>

<div class="container">
  <div class="actions">
    <button onclick="addDay()">â• Add Day</button>
    <button onclick="resetAll()">ğŸ”„ Reset</button>
    <button onclick="downloadJSON()">ğŸ“¥ Export</button>
    <input type="file" id="upload" accept=".json" onchange="importJSON(event)" style="display:none">
    <button onclick="document.getElementById('upload').click()">ğŸ“¤ Import</button>
  </div>
  <div id="planner"></div>
</div>

<script>
const defaultData = [
  {title:"DAY 1 â€“ Wednesday (Arrival Night)",text:"Late-night dinner: Usmania Fine Dining\nOpen till 11 pm | Famous: goat biryani, chicken boti\nğŸ“ 2253 W Devon Ave â€¢ 14 mi / 30 min"},
  {title:"DAY 2 â€“ Thursday (Embassy + BBQ + Family Fun)",text:"Lunch: Sabri Nihari\n11 amâ€“10 pm | Beef nihari, BBQ platter\n14 mi / 30 min\n\nFamily fun:\nNavy Pier â€“ 2 mi / 8 min\nLincoln Park Zoo â€“ 3 mi / 12 min\nMillennium Park â€“ 1.4 mi / 5 min"},
  {title:"DAY 3 â€“ Friday (Jummah + Night Cruise)",text:"Breakfast: Pak Sweets & Bakery\n7 amâ€“8 pm | Puri-halwa, lassi\n14 mi / 30 min\n\nJummah: Imam Ali Center 13 mi / 28 min\nor Downtown Islamic Center 0.9 mi / 4 min walk\n\nEarly dinner: Al Bawadi Grill\n11 amâ€“10 pm | Lamb chops, mandi\n19 mi / 35 min\n\nChicago-by-Night Cruise\nBoard 6:45 pm â€¢ 1.5 mi / 6 min"},
  {title:"DAY 4 â€“ Saturday (Ali Nihari + Free Time)",text:"Lunch: Ali Nihari\n11 amâ€“10 pm | Signature beef nihari, maghaz\n14 mi / 30 min\n\nFree options:\nDevon shopping, Oak St Beach 2 mi / 8 min,\nMuseum of Science & Industry 8 mi / 20 min"},
  {title:"DAY 5 â€“ Sunday (Departure)",text:"Hotel breakfast â†’ checkout 12 pm\nAirport: Oâ€™Hare 18 mi / 35 min, Midway 12 mi / 25 min"}
];

let data = JSON.parse(localStorage.getItem('chicagoTrip')) || [...defaultData];

function render(){
  const el=document.getElementById('planner');
  el.innerHTML='';
  data.forEach((d,i)=>{
    const day=document.createElement('div');
    day.className='day';
    day.draggable=true;
    day.innerHTML=`
      <div class="day-header" draggable="true" data-index="${i}">${d.title}</div>
      <textarea onblur="save(${i})" id="txt-${i}">${d.text}</textarea>
      <div class="actions">
        <button onclick="saveTitle(${i})">ğŸ’¾ Save Title</button>
        <input type="text" placeholder="New title" id="tit-${i}" value="${d.title}">
        <button onclick="delDay(${i})">ğŸ—‘ï¸ Delete</button>
      </div>`;
    el.appendChild(day);
    attachDrag(day,i);
  });
}

function save(i){data[i].text=document.getElementById(`txt-${i}`).value;store();}
function saveTitle(i){
  data[i].title=document.getElementById(`tit-${i}`).value;
  render();store();
}
function addDay(){
  data.push({title:"New Day",text:"Add your plans hereâ€¦"});
  render();store();
}
function delDay(i){data.splice(i,1);render();store();}
function store(){localStorage.setItem('chicagoTrip',JSON.stringify(data));}
function resetAll(){
  if(confirm('Reset to original itinerary?')){data=[...defaultData];store();render();}
}
function downloadJSON(){
  const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');a.href=url;a.download='chicago-trip.json';a.click();
}
function importJSON(e){
  const file=e.target.files[0];
  if(!file)return;
  const reader=new FileReader();
  reader.onload=()=>{data=JSON.parse(reader.result);store();render();};
  reader.readAsText(file);
}

// Drag & drop reorder
function attachDrag(el,i){
  el.addEventListener('dragstart',e=>{
    e.dataTransfer.setData('text/plain',i);
    el.classList.add('dragging');
  });
  el.addEventListener('dragend',()=>el.classList.remove('dragging'));
  el.addEventListener('dragover',e=>e.preventDefault());
  el.addEventListener('drop',e=>{
    e.preventDefault();
    const from=+e.dataTransfer.getData('text/plain');
    const to=i;
    const item=data.splice(from,1)[0];
    data.splice(to,0,item);
    store();render();
  });
}

render();
</script>

</body>
</html>
